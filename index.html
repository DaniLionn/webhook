<!DOCTYPE html>
<html>
   <head>
      <title>webhook</title>
   </head>
   <body>
      <div>
         <div>
            <label for="webhookName">webhook name</label>
            <input type="text" id="webhookName" name="webhookName" onchange="updateName()"> 
         </div>
         <!-- <div>
            <label for="webhookImage">webhook pfp</label>
            <input type="file" id="webhookImage" name="webhookImageFile" accept="image/*" onchange="updatePreview(this, 'image-preview')">
            <img id="image-preview" width="80px" height="80px"
            src=""></img>
            </div> -->
         <div>
            <label for="webhookURL">webhook URL</label>
            <input type="text" id="webhookURL" name="webhookURL" onchange="updateURL()"> 
         </div>
      </div>
      <div>
         <label for="messagebox">message</label>
         <input type="text" id="messagebox" name="messagebox" onchange="updateMessage()"> 
      </div>
      <div>
         <button id="send" onclick="sendMessage()">Send Message</button>
      </div>
      <script>
         let name = "Webhook"
         let url = ""
         let pfp = ""
         let message = ""
         
         function updateName() {
             name = document.getElementById("webhookName").value;
             console.log(name)
         }
         
         function updateURL() {
             url = document.getElementById("webhookURL").value;
             console.log(url)
         }
         
         function updatePreview(input, target) {
             const url = new URL("")
             let file = input.files[0];
             let reader = new FileReader();
         
             pfp = url.createObjectURL(file)
         
             reader.readAsDataURL(file);
             reader.onload = function () {
                 let img = document.getElementById(target);
                 // can also use "this.result"
                 img.src = reader.result;
                 
         
                 //console.log(reader.result)
             }
         
             console.log(pfp)
         }
         
         function updateMessage() {
             message = document.getElementById("messagebox").value;
             console.log(message)
         }
         //https://discord.com/api/webhooks/1059268989458595870/2_KmIYciiqtcokA2E-tHJKeYNUB9Lv9aYLEJNg8VqKdzYEpVoG2aFPcm_GHFw5D5W1QA
         function sendMessage() {
             
               const request = new XMLHttpRequest();
               request.open("POST", url);
         
               request.setRequestHeader('Content-type', 'application/json');
         
               const params = {
                 username: name,
                 //avatar_url: pfp,
                 content: document.getElementById("messagebox").value
               }
         
               request.send(JSON.stringify(params));
             }
         
             function init() {
         
                
         
         
             // Clear forms here
             document.getElementById("webhookName").value = "";
             //document.getElementById("webhookImage").value = "";
             document.getElementById("webhookURL").value = "";
             document.getElementById("messagebox").value = "";
         
             
         }
         window.onload = init;
         
      </script>
   </body>
</html>
